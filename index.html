<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rotten Repo</title>
    <link rel="stylesheet" href="style.scss">
  </head>
  <body>
    <div id="app">
      <h1>Rotten Repo</h1>
      <p>select below</p>
      <form action="">
        <input type="checkbox" id="commit-gitAdd">
        <label for="commit-gitAdd">`git add .`</label>
        <input type="date" id="commit-date">
        <input type="time" id="commit-time" step="1">
        <input type="text" id="commit-message" value="Your commit message">
        <output id="commit-output"></output>
        <div class="tooltip"><button id="copy-button" onmouseout="outFunc()" onclick="copyToClipboard()"><span class="tooltiptext" id="myTooltip">Copy to clipboard</span>COPY</button></div>
        
      </form>
    </div>
    <script>

    const currentDate = new Date().toISOString().split('T')[0];
    document.getElementById('commit-date').value = currentDate;
    console.log(currentDate)

    const now = new Date();
    const currentHour = now.getHours().toString().padStart(2, '0');
    const currentMinute = now.getMinutes().toString().padStart(2, '0');
    const currentSecond = now.getSeconds().toString().padStart(2, '0');
    const currentTime = `${currentHour}:${currentMinute}:${currentSecond}`;
    document.getElementById('commit-time').value = currentTime;

    const commitGitAdd = document.getElementById('commit-gitAdd')
    const commitOutput = document.getElementById('commit-output')
    const commitDate = document.getElementById('commit-date')
    const commitTime = document.getElementById('commit-time')
    const commitMessage = document.getElementById('commit-message')

    let outputMessage


    const updateOutput = function(){
      outputMessage = `${commitGitAdd.checked ? `git add . && ` : ``}git commit --date="${commitDate.value} ${commitTime.value}" -m "${commitMessage.value}"`
      commitOutput.innerText = outputMessage
    }

    document.addEventListener(`change`, function(e){
      console.log('change!')
      updateOutput()
    })

    document.addEventListener(`keyup`, function(e){
      console.log('keyup!')
      updateOutput()
    })


    function copyToClipboard() {
    var copyText = commitOutput.innerText;
    navigator.clipboard.writeText(copyText);

    var tooltip = document.getElementById("myTooltip");
     tooltip.innerHTML = "Copied!";
  }

  function outFunc() {
    var tooltip = document.getElementById("myTooltip");
    tooltip.innerHTML = "Copy to clipboard";
    }


updateOutput()


    </script>
  </body>
</html>
